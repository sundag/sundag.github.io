---
tags:
- OpenShift
- Kubernetes
- Paas
- DevOp
- Docker
key: 20180507
---
# OpenShift系列（1）基础概念
最近被要求搭建一套OpenShift v3的集群环境来开发与测试一套云解决方案，于是详细阅读并学习了一下V3的相关文档。在这里做一些记录。
<!--more-->

## OpenShift是什么？

首先的第一个问题就是OpenShift是什么。用最简单的话来说，Openshift是一个提供Paas(Platform-as-a-Service)底层服务的软件。再详细一点来说Openshift是一个

* 分层的
* 基于Docker容器镜像的（Docker-formatted container image）
* 结合使用Kubernetes编排功能的<b>服务</b>

设计的初衷是为了让开发人员能够更容易进行`应用`的编排。请注意在这里我用了`应用`，这在后面会有详细介绍。

## OpenShift跟Docker与Kubernetes相比有什么区别

根据上面讲的，OpenShift使用了Docker作为容器，并且使用了Kubernetes作为`容器`编排引擎。

### Docker提供了什么

首先，Docker作为容器与镜像格式已经被大家广泛应用，Docker使用非常方便，并且使用Docker作为容器之后，我们很容易隔离开发，测试与最终生产环境中因为运行环境而产生的的问题。它给用户提供了一个轻量级的能够任意迁移携带的镜像。使用该镜像我们可以为一个应用程序创建环境无关的运行环境，在该镜像中可以将应用的所有依赖统统打包，这样程序在部署的时候就不需要在意它究竟部署在什么环境上。这在完成一些简单任务的时候非常好用，但是如果你想部署一些复杂网络应用，为了高可用，存储等功能，你就不得不考虑类似

* 负载均衡
* 为容器搭载持久化存储
* 在众多宿主机，平台上计划与部署容器
* 各种各样运维，类似于滚动升级等等

这就使事情变得非常复杂，人们需要更好的工具来管理这些功能。Docker是容器平台的基石，它搭出了整个平台最开始的一片拼图。

### Kubernetes提供了什么

正如上一节所说的，在真正的应用中，仅使用Docker很难解决在部署多层应用时遇到的问题。如何在一个应用中编排各个容器，如何定义容器之间的依赖，如何规定存储，如何做负载？Kubernetes提供了编排，管理`容器`的能力。使用了Kube之后我们在容器平台的能力更进一步，在做好了容器镜像后，我们可以交给Kubernentes来将这些镜像编排部署从而提供所需要的服务。

这是一个很大的进步，我们从许多繁琐的工作中部分解放了出来。容器Paas平台的拼图更加完整了，但是，工具没有最好，只有更好。在编排容器的基础上。我们还需要更简单的界面，应用级别的编排，以及更多的控制功能。

### OpenShift V3为容器平台提供了什么

容器平台在拥有了Docker与Kube之后，我们依然不满足，从DevOps的角度来说，我们还需要：

* 源程序的管理，构建与发布
* 镜像的批量管理，启用与系统间流转
* 应用程序的批量管理
* 大开发团队中团队与用户行为追踪控制

从集群角度来说

* 集群网络基础设施的支持，例如DNS，Load Balance等

OpenShift就是在Docker与Kubernetes基础上增加了这些功能来提供功能更加完整的Paas服务平台。

## OpenShift Origin是什么？
OpenShift Origin是OpenShift的开源方案。你可以把它安装在任何受支持的平台上来实现自己的Paas平台服务。OpenShift Origin基于微服务，由一系列解耦的小服务共同工作组成。它运行在Kubernetes的一个集群上，使用etcd做为数据存储。这些部件按功能分为两类：

* REST APIs， 对核心功能的API调用支持
* 控制器， 控制器会使用API将更新应用于相应对象并报告状态或者将状态写回对象

例如，用户使用REST API对系统状态做了更新。控制器使用API读取到了用户期望的状态，然后尝试将此状态应用于系统的其它部分来保证系统整体同步。控制器是一个模式，它可以被很容易的扩展。

To be continue...
